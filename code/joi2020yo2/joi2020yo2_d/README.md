## [JOI 2019/2020 二次予選 過去問_d テンキー](https://atcoder.jp/contests/joi2020yo2/tasks/joi2020_yo2_d)

## 問題
JOI君はテンキーを $1$ つ持っている。このテンキーには $0$ から $9$ の数字が印字されているキーが以下のように配置されている。 $2$ が印字されたキーの下、および $3$ が印字されたキーの下にはキーは存在しないことに注意せよ。

$$
\begin{matrix}
7 & 8 & 9 & \\
4 & 5 & 6 & \\
1 & 2 & 3 & \\
0 \\
\end{matrix}
$$

またこのテンキーには、テンキーに配置されているキーのうち $1$ つのキーを指し示すカーソルが存在している。カーソルは最初 $0$ が印字されているキーを指し示している。  
JOI君は $1$ 回の操作で次のうちいずれかを選んで行うことができる。
- カーソルを、現在カーソルが指し示しているキーと上下左右に隣接しているキーに移動させる。ただし、キーが存在しない場所にカーソルを移動させることはできない。
- キーを押す。すなわち、カースrが指し示しているキーに印字されている数字を入力する。この際、以前の操作によって数字が入力されていた場合、既に入力されていた数字のすぐ右に新たな数字が入力される。

いま、JOI君はこのテンキーを使って、 $M$ で割った余りが $R$ であるような正の整数を入力したいと考えている。テンキーの操作には時間がかかるので、なるべく少ない操作回数で入力したい。  
$M$ と $R$ が与えられるので、JOI君が行う必要のある回数の最小値を求めるプログラムを作成せよ。

## 制約
- $2 \leqq M \leqq 100 000$
- $1 \leqq R \lt M$
- 入力される値はすべて整数である

## 入力
入力は以下の形式で標準入力から与えられる。

$$
M \ R
$$

## 出力
$M$ で割った余りが $R$ であるような正の整数を入力するために必要な操作の回数の最小値を $1$ 行で出力せよ。

## 解き方
幅優先探索によって解く。 $1$ ステップごとに処理を施した値と、その処理によって到達したキーのペアを次のキューに追加し、キューの中身をすべて取り出した後にステップを移す。取り出したペアの要素をそれぞれ $amari, key$ とおくと、次のキューに追加するペアの要素は以下の $2$ 種類。
- $(amari, \ key \text{に隣接した}next \_ key)$
- $((amari \times 10 + key) \% M, \ key)$  

また、各余りで到達したキーの記録を保存しておくことで、ループを防ぐ。具体的には、ある余り $r$ を保持して $key$ に到達したとき、別のステップや同ステップ内別順路ですでに到達しているのならば、それはその後の展開もすでに数えていて、シンプルに長手数であることになる、計算する必要のない処理である。なので、これをスキップするために記録を残す必要がある。

## コード
### [C++](joi2020yo2_d.cpp)