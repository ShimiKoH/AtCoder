## [abc023_D 射撃王](https://atcoder.jp/contests/abc023/tasks/abc023_d?lang=ja)

## 問題
高橋君は最近、射撃にハマっている。

高橋君は $N$ 個の風船すべてを射撃で割り、得られる得点をできるだけ小さくする競技に参加している。

風船には $1$ から $N$ までの番号が付けられていて、風船 $i(1 \le i \le N)$ は競技開始時に高度 $H_i$ のところにあり、$1$ 秒経過するにつれて高度が $S_i$ だけ増加する。

高橋君は競技開始時に $1$ 個風船を割ることができ、そこから $1$ 秒ごとに $1$ 個の風船を割ることができる。どの順番で風船を割るのかは高橋君が自由に決定できる。

どの風船についても、その風船を割ることによるペナルティが発生する。ペナルティはその風船が割られたときの高度と等しい整数値となる。高橋君が最終的に得る得点は $N$ 個の風船のペナルティのうちの最大値となる。

高橋君が得ることのできる得点として考えられる最小値を求めよ。

## 入力

入力は以下の形式で標準入力から与えられる。

$$
\begin{matrix*}[l]
& N \\
& H_1 & S_1 \\
& H_2 & S_2 \\
&\vdots \\
& H_N & S_N
\end{matrix*}
$$
$1$ 行目には、風船の個数を表す整数 
$N(1 \le N \le 100,000)$ が書かれている。<br>

$2$ 行目から $N$ 行には、風船に関する情報が与えられる。$N$ 行のうち $i(1 \le i \le N)$ 行目には、$2$ つの整数 $H_i(1 \le H_i \le 1,000,000,000), S_i(1 \le S_i \le 1,000,000,000)$ が空白区切りで与えられる。これは、風船 $i$ が競技開始時に高度 $H_i$ にあり、$1$ 秒経過するにつれて高度が $S_i$ ずつ上昇していくことを表す。

## 出力
高橋君が得ることができる得点として考えらえる最小値を1行に出力せよ。出力の末尾にも改行を入れること。

***

## 解き方
愚直にやるのであれば、すべての的を $1$ 秒ずつ進めて、毎時刻に次の $1$ 秒で高さが最も高くなる的を撃つ。
この方法では、的を進めるのに $\mathcal{O}(N)$ 、撃ち切るまで $\mathcal{O}(N)$ で最低 $\mathcal{O}(N^2)$ の計算量となる。
問われているのは、ある順番で打った時のペナルティの最大値を、できるだけ小さくする方法である。
言い換えれば、ある点数 $P$ に対して、どんな順番で撃っても、そのペナルティが $P$ 以下となる$P$の中で、もっとも小さいものを探す、**判定問題**である。
また、この $P$ の存在し得る区間は限定されている(特定の開区間または閉区間の中にある)ので、**二分探索法**が使える。  
では、この判定方法はどうすればよいか。  
ある的 $Target_i$ について、初期高度 $H_i$ 、上昇度 $S_i$ が与えられている。
この的を撃つ時刻を $t$ としたとき、そのペナルティ $p_i(t)$ は、 
```math 
p_i(t) = H_i + S_i \times t 
```
で表される。 $p_i(t)$ が条件「 $p_i(t)$ は $P$ 以下である 」 を満たすためには、
```math
\begin{align*}
p_i(t) & \le P \\
H_i + S_i \times t & \le P \\
S_i \times t & \le P - H_i \\
t & \le \frac{P - H_i}{S_i} \\
\end{align*}
```
であることが必要十分条件である。これはいかなる $i$ でも成立する。
ガウス記号 $[ a ]$ を、「 $a$ を超えない最大の整数 」と定義し、
```math
t_i = \frac{P - H_i}{S_i}
```
とおく。
すべての $Target_i$ は $t_i{\sec}$ 以内に撃つ必要がある。
これで判定の基準が、

「すべての的が **毎秒かぶることなく** かつ **$t_i{\sec}$以内に撃つ** ことができるか」

に定まった。この「**毎秒かぶることなく**」という部分が、ややこしい。
例えば、$t_i = 0$ なるような $t$ が2個以上ある場合は解として不適である。
「**毎秒かぶることなく**」とは言い換えれば、 「 $j\sec$ 以内に撃つべき的の総数が $j+1$ を超えない」ということである。
そこで、配列 $array$ を用意する。この配列の要素 $array[j]$ は、$j\sec$ 以内に撃つ必要のある的の数である。これをすべての的において集計し、 $array$ の累積和を考えることで、与えられた $P$ が諸々の条件を満たすか判定することができるのである。

## コード
### [C++](abc023_d.cpp)
### [Python](abc023_d.py)
